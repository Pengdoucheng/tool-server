<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>時間環四圈動畫</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: #ffffff;
    }
    body {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    svg {
      width: 700px;
      height: 700px;
    }

    /* 每一圈的基礎樣式 */
    .ring-outline {
      fill: none;
      stroke: #f7bcc0;         /* 淺粉紅圈 */
      stroke-width: 4;
    }
    .tick {
      stroke: #f58c92;         /* 稍微深一點的紅 */
      stroke-width: 3;
      stroke-linecap: round;
    }
    .number {
      fill: #c81523;           /* 數字顏色 */
      font-family: -apple-system, BlinkMacSystemFont, "Noto Sans TC", system-ui, sans-serif;
      font-size: 30px;
      font-weight: 600;
    }

    /* 讓 CSS 動畫的旋轉以自己的包圍盒中點為中心 */
    .ring-group {
      transform-box: fill-box;
      transform-origin: 50% 50%;
    }

    /* 四個圈，各自不同轉速、方向 */
    .spin1 {
      animation: spin-cw 30s linear infinite;      /* 順時針 */
    }
    .spin2 {
      animation: spin-ccw 40s linear infinite;     /* 逆時針 */
    }
    .spin3 {
      animation: spin-cw 55s linear infinite;      /* 順時針，慢一點 */
    }
    .spin4 {
      animation: spin-ccw 70s linear infinite;     /* 逆時針，更慢 */
    }

    @keyframes spin-cw {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
    @keyframes spin-ccw {
      from { transform: rotate(360deg); }
      to   { transform: rotate(0deg); }
    }
  </style>
</head>
<body>
  <svg viewBox="0 0 600 600">
    <!-- 這個 group 負責「整體傾斜」，四個圈都朝同一側 -->
    <g id="scene" transform="translate(300,300) skewX(-18) rotate(-20)">
      <!-- JS 會把四個圈的內容插進來 -->
    </g>
  </svg>

  <script>
    const svgNS = "http://www.w3.org/2000/svg";
    const scene = document.getElementById("scene");

    /**
     * 建立一個時間圈：
     *  - r：基準半徑（圈的大小）
     *  - tickCount：刻度數量
     *  - withNumbers：是否要畫 1–12
     *  - groupClass：ring-group + 動畫 class（例如 "ring-group spin1"）
     */
    function createTimeRing({ r, tickCount, withNumbers, groupClass }) {
      const g = document.createElementNS(svgNS, "g");
      g.setAttribute("class", groupClass);

      // 圓圈本體（會被外層 skew + rotate 成傾斜橢圓）
      const ellipse = document.createElementNS(svgNS, "ellipse");
      ellipse.setAttribute("cx", 0);
      ellipse.setAttribute("cy", 0);
      ellipse.setAttribute("rx", r);
      ellipse.setAttribute("ry", r * 0.65); // 比例調整成比較扁
      ellipse.setAttribute("class", "ring-outline");
      g.appendChild(ellipse);

      // 刻度
      const innerR = r - 25;
      const outerR = r + 10;

      for (let i = 0; i < tickCount; i++) {
        const angle = (Math.PI * 2 / tickCount) * i - Math.PI / 2; // 從上方開始
        const isHour = tickCount === 60 ? (i % 5 === 0) : false;  // 只有 60 刻度圈有「較長刻度」

        const r1 = isHour ? innerR - 5 : innerR;
        const r2 = isHour ? outerR + 6 : outerR;

        const x1 = Math.cos(angle) * r1;
        const y1 = Math.sin(angle) * r1;
        const x2 = Math.cos(angle) * r2;
        const y2 = Math.sin(angle) * r2;

        const line = document.createElementNS(svgNS, "line");
        line.setAttribute("x1", x1);
        line.setAttribute("y1", y1);
        line.setAttribute("x2", x2);
        line.setAttribute("y2", y2);
        line.setAttribute("class", "tick");
        g.appendChild(line);
      }

      // 數字只畫在最外圈（或你想要的那圈）
      if (withNumbers) {
        const numberR = r + 55; // 數字距離中心的半徑
        for (let n = 1; n <= 12; n++) {
          const angle = (Math.PI * 2 / 12) * n - Math.PI / 2;

          const x = Math.cos(angle) * numberR;
          const y = Math.sin(angle) * numberR;

          const text = document.createElementNS(svgNS, "text");
          text.textContent = n.toString();
          text.setAttribute("x", x);
          text.setAttribute("y", y);
          text.setAttribute("class", "number");
          text.setAttribute("text-anchor", "middle");
          text.setAttribute("dominant-baseline", "middle");

          g.appendChild(text);
        }
      }

      scene.appendChild(g);
    }

    // 四個圈的設定（你可以微調 r、tickCount、動畫 class）
    const ringsConfig = [
      { r: 80,  tickCount: 40, withNumbers: false, groupClass: "ring-group spin1" }, // 最裡面
      { r: 125, tickCount: 60, withNumbers: false, groupClass: "ring-group spin2" },
      { r: 165, tickCount: 60, withNumbers: true,  groupClass: "ring-group spin3" }, // 有數字的一圈
      { r: 210, tickCount: 30, withNumbers: false, groupClass: "ring-group spin4" }  // 最外圈
    ];

    ringsConfig.forEach(cfg => createTimeRing(cfg));
  </script>
</body>
</html>
